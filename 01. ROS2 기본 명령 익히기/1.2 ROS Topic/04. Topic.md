### 1. Topic의 개념
---
![[11.jpg]]

서비스가 요청에 대한 응답으로 구성되었다면 토픽은 발생과 구독으로 되어있는 개념이다. 

토픽은 서비스와 달리 요청한 것에 대해서만 응답하지 않는다. 발행하기로 결정이 난 메시지는 그저 구독만 하는 형태이다. 구독해야 할 메시지가 어떤 형태인지는 미리 알아야 하겠다만 요청이라는 과정이 따로 존재하진 않는다.  그러므로 토픽은 토픽의 이름과 데이터의 구조를 알고 있다면 누구나 구독이 가능하다. 


### 2. ros2 topic list
---
```
ros2 topic list
```

현재 사용 가능한 topic을 조회할 수 있다. 


1. -t 옵션
	`ros2 topic list -t` 명령어에서 `-t` 옵션은 해당 ROS2 시스템에서 사용 가능한 모든 토픽의 이름과 그들의 타입을 함께 표시하라는 의미이다.

	기본적으로, `ros2 topic list` 명령어는 사용 가능한 모든 토픽의 이름만을 나열한다. 그러나 `-t` 옵션을 추가하면, 각 토픽 이름 옆에 해당 토픽의 메시지 타입도 함께 표시된다.

	예를 들어, ROS2 시스템에 다음과 같은 토픽이 있다고 가정하자

	- `/camera/image_raw` - 메시지 타입: `sensor_msgs/msg/Image`
	- `/robot/velocity` - 메시지 타입: `geometry_msgs/msg/Twist`

	`ros2 topic list -t` 명령어를 실행하면, 결과는 대략 다음과 같이 표시될 것이다.

```
/camera/image_raw [sensor_msgs/msg/Image] 
/robot/velocity [geometry_msgs/msg/Twist]
```

이렇게 하면 ROS2 시스템에서 사용되는 토픽들과 각각의 메시지 타입을 빠르게 파악할 수 있어, 시스템의 통신 구조를 이해하고 디버깅하는 데 도움이 된다. 


### 3. ros2 topic type
---
```
ros2 topic type <topic_name>
```

여기서 `<topic_name>`은 확인하고자 하는 토픽의 이름이다.

`ros2 topic type` 명령어는 ROS2 시스템에서 특정 토픽이 어떤 타입의 메시지를 사용하는지 파악하고, 해당 메시지 타입에 대한 정보를 얻기 위해 다른 명령어(예: `ros2 interface show`)와 함께 사용될 수 있다.

서비스와 같이 토픽도 자신이 사용하는 메시지의 타입을 정의하고 있다. 메시지의 타입은 로봇에서 많이 사용하는 다양한 형태를 이미 ROS에서 정의를 잘 해두고 있지만, 다양한 이유로 패키지들이 여러 메시지를 직접 만들어서 사용한다. 



### 4. ros2 topic info
---
```
ros2 topic info <topic_name>
```

여기서 `<topic_name>`은 정보를 얻고자 하는 토픽의 이름

토픽은 주는 쪽과 받는 쪽이 있다. 그걸 구분해서 보는 명령어는 다음과 같다 

`ros2 topic info` 명령어는 ROS2 에서 특정 토픽에 대한 상세 정보를 제공한다. 이 명령어를 사용하면 해당 토픽에 대해 현재 발행(publishing)하고 있는 노드와 구독(subscribing)하고 있는 노드의 수, 그리고 토픽의 메시지 타입에 대한 정보를 얻을 수 있다.

1. -v 옵션
	`ros2 topic info` 명령어에서 `-v` 옵션은 "verbose"의 약자로, "상세하게"라는 의미. 
	
	이 옵션을 사용하면, 특정 토픽에 대한 더 상세한 정보를 제공한다. 표준 `ros2 topic info` 명령어는 토픽의 메시지 타입, 발행하는 노드의 수, 구독하는 노드의 수와 같은 기본 정보만을 보여주지만, `-v` 옵션을 추가하면 해당 토픽을 발행하거나 구독하는 각각의 노드의 이름을 포함한 더 많은 정보를 볼 수 있다.


### 5. ros2 topic echo
---
```
ros2 topic echo <topic_name>
```

`ros2 topic echo` 명령어는 ROS2에서 특정 토픽으로부터 전송되는 메시지의 내용을 실시간으로 터미널에 출력하는 데 사용된다. 이 명령어는 ROS2 시스템에서 데이터가 어떻게 흐르는지를 시각적으로 확인할 수 있게 해주며, 토픽을 통해 전송되는 메시지의 내용을 모니터링하는 데 유용하다.


### 6. ros2 topic pub
---
```
ros2 topic pub -once (or rate <hz>) <topic_name> <msg_type> '<args>'
```

`ros2 topic pub` 명령어는 ROS2 (Robot Operating System 2)에서 특정 토픽에 메시지를 수동으로 발행(publish)하는 데 사용된다. 

- `<topic_name>`: 메시지를 발행할 토픽의 이름
- `<msg_type>`: 발행할 메시지의 타입
- `'<args>'`: 발행할 메시지의 내용이다. 이 부분은 메시지 타입에 따라 다르며, 메시지 타입의 구조에 맞게 데이터를 제공해야 한다


`ros2 topic pub` 명령어에서 `-once`와 `--rate` (또는 `-r`) 옵션은 메시지 발행의 빈도와 방식을 제어하는 데 사용된다.

1. `-once`: 이 옵션을 사용하면 지정된 토픽에 대해 단 한 번만 메시지를 발행하고 명령어가 종료된다. 이는 특정 메시지를 테스트하거나 한 번의 이벤트를 시뮬레이션할 때 유용합니다. 예를 들어, 시스템이 특정 메시지를 수신할 때 어떻게 반응하는지 확인하고 싶을 때 이 옵션을 사용할 수 있습니다.

    `ros2 topic pub -once /chatter std_msgs/msg/String "data: 'Hello ROS2'"`
    
    이 명령어는 `/chatter` 토픽에 "Hello ROS2"라는 메시지를 단 한 번만 발행하고 종료된다.

1. `--rate` 또는 `-r`: 이 옵션은 메시지를 정해진 주기(초 단위)로 반복해서 발행한다. 
	
	예를 들어, `--rate 10`은 초당 10번 메시지를 발행하라는 의미이다. 이는 연속적인 메시지 스트림이 필요할 때, 예를 들어 센서 데이터의 연속적인 시뮬레이션 등에 유용하다.
	
    `ros2 topic pub -r 10 /chatter std_msgs/msg/String "data: 'Hello ROS2'"`
    
    이 명령어는 `/chatter` 토픽에 "Hello ROS2"라는 메시지를 초당 10회 반복해서 발행합니다.
    

### 7. rqt_graph
---
``` 
rqt_graph
```

### 8. 활용해보자!
---
[[04.1 활용해보자]]